<!DOCTYPE html> 
<html lang="en"> 
    <head> 
        <meta charset="utf-8"> 
        <meta content="width=device-width, initial-scale=1.0" name="viewport"> 
        <title>CroMo-Documentation</title>         
        <meta content="" name="description"> 
        <meta content="" name="keywords"> 
        <!-- Favicons -->         
        <link href="assets/img/favicon.png" rel="icon"> 
        <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon"> 
        <!-- Google Fonts -->         
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,700,700i&display=swap" rel="stylesheet"> 
        <!-- Vendor CSS Files -->         
        <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet"> 
        <link href="assets/vendor/aos/aos.css" rel="stylesheet"> 
        <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet"> 
        <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet"> 
        <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet"> 
        <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet"> 
        <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet"> 
        <!-- Template Main CSS File -->   
        <link href="assets/prism.css" rel="stylesheet" />     
        <link href="assets/css/style.css" rel="stylesheet"> 
        <!-- =======================================================
  * Template Name: Moderna - v4.2.0
  * Template URL: https://bootstrapmade.com/free-bootstrap-template-corporate-moderna/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->         
</head>     
    <body> 
        <script src="assets/prism.js"></script>
        <!-- ======= Header ======= -->         
        <header id="header" class="fixed-top d-flex align-items-center "> 
            <div class="container d-flex justify-content-between align-items-center"> 
                <div class="logo"> 
                    <h1 class="text-light"><a href="index.html"><span>CroMo</span></a></h1> 
                    <!-- Uncomment below if you prefer to use an image logo -->                     
                    <!-- <a href="index.html"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->                     
                </div>                 
                <nav id="navbar" class="navbar"> 
                    <ul> 
                        <li>
                            <a href="index.html">Home</a>
                        </li>                         
                        <li class="dropdown">
                            <a href="documentation.html"><span>Documentation</span> <i class="bi bi-chevron-down"></i></a>
                            <ul> 
                                <li>
                                    <a href="documentation.html#data_collection">Data Collection</a>
                                </li> 
                                <li>
                                    <a href="documentation.html#data_privacy">Data Privacy</a>
                                </li>                                 
                                <li>
                                    <a href="documentation.html#data_format">Data Format</a>
                                </li>                                                                                                  
                            </ul>                             
                        </li>                         
                        <li class="dropdown">
                            <a class="active" href="download.html"><span>Download</span> <i class="bi bi-chevron-down"></i></a>
                            <ul> 
                                <li>
                                    <a href="download.html#instructions">Instructions</a>
                                </li>
                                <li>
                                    <a href="download.html#processed">Processed data</a>
                                </li>                                 
                                <li>
                                    <a href="download.html#raw">Raw data</a>
                                </li>                                 
                            </ul>                             
                        </li>                                              
                        <li class="dropdown">
                            <a href="about.html"><span>About</span> <i class="bi bi-chevron-down"></i></a>
                            <ul> 
                                <li>
                                    <a href="about.html#team">Team</a>
                                </li>                                 
                                <li>
                                    <a href="about.html#terms_of_use">Terms of Use</a>
                                </li>                                                                  
                            </ul>                             
                        </li>                         
                    </ul>                     
                    <i class="bi bi-list mobile-nav-toggle"></i> 
                </nav>
                <!-- .navbar -->                 
            </div>             
        </header>
        <!-- End Header -->         
        <main id="main"> 
            <!-- ======= Our Services Section ======= -->             
            <!-- End Our Services Section -->             
            <!-- ======= Services Section ======= -->             
            <section class="features"> 
                <div class="container">
                    <div class="row aos-init aos-animate" data-aos="fade-up"> 
</div>               
                    <span class="anchor" id="data_collection"></span>
                    <h3><b>Data Collection</b></h3>
                    <h4><b>The Rig</b></h4>
                    <div style="display: inline-block">
                    <div style=" float:left">
                        <img src="https://user-images.githubusercontent.com/100925445/159043687-c1fa0213-63b2-4aad-a691-7ffc8e127420.png" alt="Camera Rig" height="200" width="200" style="Padding: 10px">
                    </div>
                    <p> 
                        Our rig is constructed in order to capture synchronised data across multiple modalities including stereo polarisation, i-ToF correlation, Depth and IMU. We rigidly mount two polarisation cameras (Lucid PHX050S-QC) providing a left-right stereo pair, an i-ToF camera (Lucid HLS003S-001) operating at 25Mhz and a structured-light (RealSense D435i) camera for active IR stereo capture.
                    </p>
                        <details>
                            <summary>More details</summary>
                            <p> 
                        All devices are connected with a hardware synchronisation wire
                        resulting in time-aligned video capture at a frame rate of 10fps. The left polarisation camera is the lead camera which
                        generates the genlock signal and defines the world reference frame. Accurate synchronisation was validated using a flash-light torch and was further confirmed by the
                        respectable quality observed from stereo Block Matching. The focus of all sensors is set to infinity, the aperture to maximum, and the exposure is manually fixed at
                        the beginning of each capture sequence. The calibration on all four cameras’ extrinsics, intrinsics, and distortion coefficients is done with a graph bundle-adjustment for improved
                        multi-view calibration.
                            </p>
                        </details>
                    </div>
                    <br><br>
                    <h4><b>The data</b></h4>
                    <div style="display: inline-block">
                    <div style="float:right">
                        <img src="https://user-images.githubusercontent.com/100925445/159043769-12e859e2-8b96-4337-967c-2240fb5f017c.png" alt="Dataset_table"  height="200" width="300"  style="Padding: 10px">
                    </div>
                    <p> 
                        We collect a unique dataset comprising multi-modal captures such that each time point pertains to measurement of (1) Polarisation: raw stereo polarisation cameras produce 2448×2048 px stereo images. (2) i-ToF: 4 channel 640×480 px correlation images. (3) Depth: a structured-light capture of the scene resulting in a 848×480 px depth image. In addition to the three main sensors, IMU information is recorded to further enable future research directions. 
                    </p>   
                    <details>
                            <summary>More details</summary>
                            <p> 
                        Our dataset consists of more than 20k frames, totalling >80k images of indoor and outdoor sequences in challenging conditions, with no constraints on minimum or maximum scene range. We group these sequences into four different scenes which we name: Kitchen, Station, Park and Facades.
                    </p>
                    </details>
                    </div>

                    <div class="row aos-init aos-animate" data-aos="fade-up">
                        <div class="col-md-7 order-2 order-md-1 pt-5"> 
                        </div>                         
                    </div>

                    <span class="anchor" id="data_privacy"></span>
                    <h3><b>Privacy protection</b></h3>
                    <p>The scene imagery is collected in permitted public areas. We comply with local regulations and avoid releasing any localization information, including GPS and cartographic information. For privacy protection, we proactively attempt to avoid the capture of images that may contain personal information, such as human faces and license plates. If any dataset imagery is found not to comply with these privacy constraints, please contact the authors for image removal.</p>
                    <div class="row aos-init aos-animate" data-aos="fade-up">
                        <div class="col-md-7 order-2 order-md-1 pt-5"> 
                        </div>                         
                    </div>

                    <span class="anchor" id="data_format"></span>
                    <h3><b>Data Format</b></h3>
                    <h4><b>Processed Data Format</b></h4>
                    <p>
                    Processed data are data which have been pre-processed for direct usage. For example, the stereo pair has been undistort-rectified, the depth (from structured-light and colmap) was projected to a reference camera frame (left polarized sensor), the colmap depth scale is corrected fitting the depth to the structure-light depth, and we generate RGB image from polarized image for convenience (although not used in the paper). 
                    </p>
                    Hereafter follow some instructive examples to perform data loading for the various sensors:
                    <span class=example>
                    </br>
                    <b>Depth from {colmap,structured-light}:</b></br>
                    The following example is to open the <b>depth</b> from colmap, frame 0000000097.png, scene Kitchen, date 20201027-180941:
                    <pre style="padding:0px 0px 0px 10px;;margin:0px;">
                    <code class="language-python">
import cv2
image_path = "CroMo_dataset/kitchen/20201027-180941/colmap/sensor/data/0000000097.png"
depth = cv2.imread(image_path,-1).astype(float)/1000
                    </code></pre>
                    The depth will be a 2D float array (512, 612) with depth values in meters, zero being an invalid or missing value.
                </span>
                <span class=example>
                </br>
                <b>Correlation from i-tof:</b></br>
                The following example is to open the <b>correlation images</b> from i-tof, frame 0000000097.png, scene Kitchen, date 20201027-180941:
                <pre style="padding:0px 0px 0px 10px;;margin:0px;"><code class="language-python">
import cv2, numpy as np
image_path = "CroMo_dataset/kitchen/20201027-180941/i-tof/sensor/data/0000000097.png"
correlation_input = cv2.imread(image_path,-1).astype(float)/255
w,h = correlation_input.shape
nw = w//4
C_0 = correlation_input[0 * nw:1 * nw, :]
C_1 = correlation_input[1 * nw:2 * nw, :]
C_2 = correlation_input[2 * nw:3 * nw, :]
C_3 = correlation_input[3 * nw:4 * nw, :]
correlation = np.dstack((C_0, C_1, C_2, C_3))
                </code></pre>
                The correlation will be a 3D float array (480, 640, 4), the last channels being the correlation coefficients.
            </span>
            <span class=example>
            </br>
            <b>Polarized data from polarized sensor:</b></br>
            The following example is to open the <b>polarized data</b> from left polarized sensor, frame 0000000097.png, scene Kitchen, date 20201027-180941:
            <pre style="padding:0px 0px 0px 10px;;margin:0px;"><code class="language-python">
import cv2, numpy as np
image_path = "CroMo_dataset/kitchen/20201027-180941/polarized/left/data/0000000097.png"
polarized_input = cv2.imread(image_path,-1).astype(float)/255
w,h,c = polarized_input.shape
nw = w//4
pol_0 = polarized_input[0 * nw:1 * nw, :]
pol_45 = polarized_input[1 * nw:2 * nw, :]
pol_90 = polarized_input[2 * nw:3 * nw, :]
pol_135 = polarized_input[3 * nw:4 * nw, :]
polarized = np.dstack((pol_0, pol_45, pol_90, pol_135))
            </code></pre>
            The polarized data will be a 3D float array (512, 612, 12), the last channels being the 4 polarization angles for the 3 color channels.
        </span>
            <span class=example>
            </br>
            <b>RGB from polarized sensor:</b></br>
            The following example is to open the <b>rgb</b> from left polarized sensor, frame 0000000097.png, scene Kitchen, date 20201027-180941:
            <pre style="padding:0px 0px 0px 10px;;margin:0px;"><code class="language-python">
import cv2
image_path = "CroMo_dataset/kitchen/20201027-180941/rgb/left/data/0000000097.png"
rgb = cv2.imread(image_path)
            </code></pre>
            The rgb will be a 3D uint8 array (512, 612, 3).</br>
            Note that we do not have rgb sensor and this is obtained using a demosaicing_CFA_Bayer_bilinear correction on raw polarised data before averaging the values.
        </span>

        <span class=example>
        </br>
        <b>IMU from structured-light sensor:</b></br>
        The following example is to open the <b>imu</b> from structured-light sensor date 20201027-180941:
        <pre style="padding:0px 0px 0px 10px;;margin:0px;"><code class="language-python">
import numpy as np
data_path = "CroMo_dataset/kitchen/20201027-180941/imu/sensor/data/log_accel.txt"
imu_raw = np.loadtxt(data_path)
data = {}
for key, val in zip(imu_raw[:,0], imu_raw[:,1:]):
    data[key] = val
        </code></pre>
        Note that the imu accelerometer (log_accel.txt) and gyroscope (log_gyro.txt) are sampling the scene at their our pace, with the same clock as the structured-light depth. This means interpolation would be needed to align the data with the other frames. For reference, the mapping between timestamp and frame id is given in log_images.txt.
        <br>
        For convenience, we linearly interpolate the accelerometer and gyroscope at each timestamps of log_accel.txt, log_gyro.txt, and log_images.txt and provide the results in log_imu.txt.
    </span>



                    <h4><b>Raw Data Format</b></h4>
                        Description on raw will be provided at the time of the release of the RAW data

                    <div class="col-md-7 order-2 order-md-1 pt-5"> 
                    </div>

                </div>                 
            </section>
            <!-- End Services Section -->             
            <!-- ======= Why Us Section ======= -->             
            <!-- End Why Us Section -->             
            <!-- ======= Service Details Section ======= -->             
            <!-- End Service Details Section -->             
            <!-- ======= Pricing Section ======= -->             
            <!-- End Pricing Section -->             
        </main>
        <!-- End #main -->         
        <!-- ======= Footer ======= -->         
        <footer id="footer" data-aos-easing="ease-in-out" data-aos-duration="500"> 
            <div class="container"> 
                <div class="copyright"> 
                    &copy; Copyright 
                    <strong><span>HUAWEI</span></strong>. All Rights Reserved
                </div>                 
                <div class="credits"> 
                    <!-- All the links in the footer should remain intact. -->                     
                    <!-- You can delete the links only if you purchased the pro version. -->                     
                    <!-- Licensing information: https://bootstrapmade.com/license/ -->                     
                    <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/free-bootstrap-template-corporate-moderna/ -->                     
                    Designed by 
                    <a href="https://bootstrapmade.com/">BootstrapMade</a> 
                </div>                 
            </div>             
        </footer>
        <!-- End Footer -->         
        <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a> 
        <!-- Vendor JS Files -->         
        <script src="assets/vendor/aos/aos.js"></script>         
        <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>         
        <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>         
        <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>         
        <script src="assets/vendor/php-email-form/validate.js"></script>         
        <script src="assets/vendor/purecounter/purecounter.js"></script>         
        <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>         
        <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>         
        <!-- Template Main JS File -->         
        <script src="assets/js/main.js"></script>         
    </body>     
</html>
